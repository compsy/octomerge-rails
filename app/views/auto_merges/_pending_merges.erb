<% content_for :frame_width, '600px' %>
<% content_for :frame_height, '300px' %>
<div class="container">
<div class="table-list-header" id="js-issues-toolbar">
  <div class="table-list-filters">
    <div class="table-list-header-toggle states pl-3">
      <a href="?pending=1" class="btn-link selected">
        <svg version="1.1" class="octicon octicon-git-pull-request" x="0px" y="0px" width="12px" height="16px" viewBox="0 0 24 24">
          <path d="M20.883,16.698V7.402c0-4.452-4.442-4.44-4.442-4.44h-1.479V0L10.52,4.443l4.442,4.44v-2.96c0,0,0.617,0,1.479,0
            c1.306,0,1.48,1.479,1.48,1.479v9.296c-0.882,0.513-1.48,1.454-1.48,2.551c0,1.634,1.327,2.961,2.962,2.961s2.962-1.328,2.962-2.961
            C22.365,18.155,21.766,17.211,20.883,16.698L20.883,16.698z M19.403,20.729c-0.817,0-1.481-0.662-1.481-1.479s0.664-1.48,1.481-1.48
            c0.819,0,1.48,0.663,1.48,1.48C20.883,20.068,20.221,20.729,19.403,20.729z M3.115,7.302v9.294c0,4.454,4.442,4.441,4.442,4.441
            h1.481V24l4.441-4.442l-4.441-4.441v2.96c0,0-0.618,0-1.481,0c-1.305,0-1.479-1.479-1.479-1.479V7.303
            C6.96,6.789,7.557,5.848,7.557,4.751c0-1.634-1.327-2.961-2.961-2.961c-1.634,0-2.961,1.327-2.961,2.961
            C1.635,5.845,2.233,6.789,3.115,7.302L3.115,7.302z M4.596,6.293c-0.817,0-1.48-0.661-1.48-1.48c0-0.816,0.664-1.479,1.48-1.479
            c0.82,0,1.48,0.663,1.48,1.479C6.077,5.633,5.415,6.293,4.596,6.293z"/>
        </svg>
        <%= @pending_auto_merges.count %> Pending
      </a>
      <a href="?closed=1" class="btn-link ">
        <svg aria-hidden="true" class="octicon octicon-check" height="16" version="1.1" viewBox="0 0 12 16" width="12">
          <path d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"></path>
        </svg>
        <%= @closed_auto_merges.count %> Closed
      </a>
    </div>
    <div class="table-list-header-toggle float-right">
<!--       <div class="float-left select-menu js-menu-container js-select-menu" data-contents-url="/issues/show_menu_content?partial=issues%2Ffilters%2Fvisibility_content&amp;pulls_only=true&amp;q=is%3Aopen+is%3Apr+author%3Atennisonchan">
        <button class="btn-link select-menu-button js-menu-target" type="button" aria-haspopup="true" data-hotkey="v">
          Visibility
        </button>
        <div class="select-menu-modal-holder js-menu-content js-navigation-container" aria-hidden="true">
          <div class="select-menu-modal">
            <div class="select-menu-header js-navigation-enable" tabindex="-1">
              <svg aria-label="Close" class="octicon octicon-x js-menu-close" height="16" role="img" version="1.1" viewBox="0 0 12 16" width="12">
                <path d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"></path>
              </svg>
              <span class="select-menu-title">Repository visibility</span>
            </div>
            <div class="js-select-menu-deferred-content">
              <div class="select-menu-list" data-filter="visibility">
                <div data-filterable-for="visibility-filter-field" data-filterable-type="substring">
                  <a href="/pulls?q=is%3Aopen+is%3Apr+author%3Atennisonchan+is%3Aprivate" class="select-menu-item js-navigation-item js-navigation-open ">
                    <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12">
                      <path d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"></path>
                    </svg>
                    <div class="select-menu-item-text">Private repositories only</div>
                  </a>
                  <a href="/pulls?q=is%3Aopen+is%3Apr+author%3Atennisonchan+is%3Apublic" class="select-menu-item js-navigation-item js-navigation-open ">
                    <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12">
                      <path d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"></path>
                    </svg>
                    <div class="select-menu-item-text">Public repositories only</div>
                  </a>
                </div>
              </div>
            </div>
            <div class="select-menu-loading-overlay anim-pulse">
              <svg aria-hidden="true" class="octicon octicon-octoface" height="32" version="1.1" viewBox="0 0 16 16" width="32">
                <path d="M14.7 5.34c.13-.32.55-1.59-.13-3.31 0 0-1.05-.33-3.44 1.3-1-.28-2.07-.32-3.13-.32s-2.13.04-3.13.32c-2.39-1.64-3.44-1.3-3.44-1.3-.68 1.72-.26 2.99-.13 3.31C.49 6.21 0 7.33 0 8.69 0 13.84 3.33 15 7.98 15S16 13.84 16 8.69c0-1.36-.49-2.48-1.3-3.35zM8 14.02c-3.3 0-5.98-.15-5.98-3.35 0-.76.38-1.48 1.02-2.07 1.07-.98 2.9-.46 4.96-.46 2.07 0 3.88-.52 4.96.46.65.59 1.02 1.3 1.02 2.07 0 3.19-2.68 3.35-5.98 3.35zM5.49 9.01c-.66 0-1.2.8-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.54-1.78-1.2-1.78zm5.02 0c-.66 0-1.2.79-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.53-1.78-1.2-1.78z"></path>
              </svg>
            </div>
          </div>
        </div>
      </div> -->
    </div>
  </div>
</div>

  <ul class="Box-body border-right border-bottom border-left js-navigation-container js-active-navigation-container">
    <%- @auto_merges.each do |auto_merge| %>
      <li class="Box-body-row Box-body-row--highlight p-0 js-navigation-item js-issue-row read navigation-focus">
        <div class="d-table table-fixed width-full Box-row--drag-hide">
          <div class="float-left col-9 p-3 lh-condensed">
            <div>
              <%= link_to auto_merge.title, auto_merge.pr_url, target: '_blank' %>
            </div>
            <div>
              <span id='auto_merge-ref'>
                <%= auto_merge.pull_request.head.ref %>
              </span>
              <a href='#'
                id='ref-copy-button'
                data-clipboard-target='#auto_merge-ref'
                title='Click to copy'>copy</a>
            </div>
            <div class="mt-1 text-small text-gray">
              <span class="last-updated">
                <%- if auto_merge.state == 'pending' %>
                  last tried <time datetime="<%= auto_merge.last_updated %>"><%= time_ago_in_words(auto_merge.last_updated, include_seconds: true) %></time> ago
                <% else %>
                  last tried on <time datetime="<%= auto_merge.last_updated %>"><%= auto_merge.last_updated.in_time_zone %></time>
                <% end -%>
              </span>
            </div>
          </div>
          <div class="float-right col-2">
            <% auto_merge.statuses&.each do |status| %>
              <div>
                <%= link_to status["context"], status["target_url"], class: "state-#{status['state']}", target: "_blank" %>
              </div>
            <% end %>
          </div>
        </div>
      </li>
    <% end -%>
  </ul>
</div>